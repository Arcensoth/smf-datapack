# smf:module/sync

function smf:module/installed
function smf:module/version

# assume unsynced
scoreboard players set $sync smf_temp 0

# synced if not installed
execute if score $installed smf_temp matches ..0 run scoreboard players set $sync smf_temp 1

# synced if installed and version matches
execute if score $installed smf_temp matches 1.. if score $vmajor smf_module = $vmajor smf_temp if score $vminor smf_module = $vminor smf_temp if score $vpatch smf_module = $vpatch smf_temp if score $vdev smf_module = $vdev smf_temp run scoreboard players set $sync smf_temp 1

# warn if unsynced
execute if score $sync smf_temp matches ..0 if score $vdev smf_temp matches ..0 if score $vdev smf_module matches ..0 run tellraw @a[tag=smf.admin] [{"text": "[SMF]", "color": "aqua"}, {"text": " Yikes! Module ", "color": "red"}, {"text": "v", "color": "yellow", "extra": [{"score": {"name": "$vmajor", "objective": "smf_temp"}}, {"text": "."}, {"score": {"name": "$vminor", "objective": "smf_temp"}}, {"text": "."}, {"score": {"name": "$vpatch", "objective": "smf_temp"}}]}, {"text": " is active but ", "color": "red"}, {"text": "v", "color": "yellow", "extra": [{"score": {"name": "$vmajor", "objective": "smf_module"}}, {"text": "."}, {"score": {"name": "$vminor", "objective": "smf_module"}}, {"text": "."}, {"score": {"name": "$vpatch", "objective": "smf_module"}}]}, {"text": " is installed!", "color": "red"}]
execute if score $sync smf_temp matches ..0 if score $vdev smf_temp matches ..0 if score $vdev smf_module matches 1.. run tellraw @a[tag=smf.admin] [{"text": "[SMF]", "color": "aqua"}, {"text": " Yikes! Module ", "color": "red"}, {"text": "v", "color": "yellow", "extra": [{"score": {"name": "$vmajor", "objective": "smf_temp"}}, {"text": "."}, {"score": {"name": "$vminor", "objective": "smf_temp"}}, {"text": "."}, {"score": {"name": "$vpatch", "objective": "smf_temp"}}]}, {"text": " is active but ", "color": "red"}, {"text": "v", "color": "yellow", "extra": [{"score": {"name": "$vmajor", "objective": "smf_module"}}, {"text": "."}, {"score": {"name": "$vminor", "objective": "smf_module"}}, {"text": "."}, {"score": {"name": "$vpatch", "objective": "smf_module"}}]}, {"text": "-dev", "color": "gold", "extra": [{"score": {"name": "$vdev", "objective": "smf_module"}}]}, {"text": " is installed!", "color": "red"}]
execute if score $sync smf_temp matches ..0 if score $vdev smf_temp matches 1.. if score $vdev smf_module matches ..0 run tellraw @a[tag=smf.admin] [{"text": "[SMF]", "color": "aqua"}, {"text": " Yikes! Module ", "color": "red"}, {"text": "v", "color": "yellow", "extra": [{"score": {"name": "$vmajor", "objective": "smf_temp"}}, {"text": "."}, {"score": {"name": "$vminor", "objective": "smf_temp"}}, {"text": "."}, {"score": {"name": "$vpatch", "objective": "smf_temp"}}]}, {"text": "-dev", "color": "gold", "extra": [{"score": {"name": "$vdev", "objective": "smf_temp"}}]}, {"text": " is active but ", "color": "red"}, {"text": "v", "color": "yellow", "extra": [{"score": {"name": "$vmajor", "objective": "smf_module"}}, {"text": "."}, {"score": {"name": "$vminor", "objective": "smf_module"}}, {"text": "."}, {"score": {"name": "$vpatch", "objective": "smf_module"}}]}, {"text": " is installed!", "color": "red"}]
execute if score $sync smf_temp matches ..0 if score $vdev smf_temp matches 1.. if score $vdev smf_module matches 1.. run tellraw @a[tag=smf.admin] [{"text": "[SMF]", "color": "aqua"}, {"text": " Yikes! Module ", "color": "red"}, {"text": "v", "color": "yellow", "extra": [{"score": {"name": "$vmajor", "objective": "smf_temp"}}, {"text": "."}, {"score": {"name": "$vminor", "objective": "smf_temp"}}, {"text": "."}, {"score": {"name": "$vpatch", "objective": "smf_temp"}}]}, {"text": "-dev", "color": "gold", "extra": [{"score": {"name": "$vdev", "objective": "smf_temp"}}]}, {"text": " is active but ", "color": "red"}, {"text": "v", "color": "yellow", "extra": [{"score": {"name": "$vmajor", "objective": "smf_module"}}, {"text": "."}, {"score": {"name": "$vminor", "objective": "smf_module"}}, {"text": "."}, {"score": {"name": "$vpatch", "objective": "smf_module"}}]}, {"text": "-dev", "color": "gold", "extra": [{"score": {"name": "$vdev", "objective": "smf_module"}}]}, {"text": " is installed!", "color": "red"}]

# {"text": "-dev", "color": "gold", "extra": [{"score": {"name": "$vdev", "objective": "smf_temp"}}]}
